node {
        dockerfile {
            filename 'Dockerfile.jenkinsAgent'
            args '-v /var/run/docker.sock:/var/run/docker.sock --network="e35ef571401a" -u jenkins:docker'
       }
    stage('Checkout') {
    git url: "ssh://jenkins@codeurjc-forge-gerrit:29418/awesome-project"
    }

stage ('Unit test') {
     docker.image('maven:3-jdk-8-alpine').inside('-v $HOME/.m2:/root/.m2 '
     +'-v /var/run/docker.sock:/var/run/docker.sock') {
        sh 'rm /target/*.flv || true'
        sh 'mvn package -Dmaven.test.failure.ignore=true -Dtest=BoardParameterizedTest,BoardTest,TicTacToeGameTest,TicTacToeSystemTest test'  }
        step([$class: 'JUnitResultArchiver', testResults: '/target/surefire-reports/TEST-*.xml'])
   //    archiveArtifacts artifacts: 'target/*.flv'
    }
    stage ('Unit Test') {
        step([$class: 'JUnitResultArchiver', testResults: '**/target/surefire-reports/TEST-*.xml'])
    }
